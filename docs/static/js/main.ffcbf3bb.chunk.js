(this.webpackJsonptoday=this.webpackJsonptoday||[]).push([[6],{106:function(e,t,a){e.exports=a(368)},112:function(e,t,a){},113:function(e,t,a){},115:function(e,t,a){},134:function(e,t,a){var n={"./apl/apl.js":[385,30],"./asciiarmor/asciiarmor.js":[386,31],"./asn.1/asn.1.js":[387,32],"./asterisk/asterisk.js":[388,33],"./brainfuck/brainfuck.js":[389,34],"./clike/clike.js":[374,2],"./clojure/clojure.js":[390,35],"./cmake/cmake.js":[391,36],"./cobol/cobol.js":[392,37],"./coffeescript/coffeescript.js":[375,38],"./commonlisp/commonlisp.js":[393,39],"./crystal/crystal.js":[394,40],"./css/css.js":[371,1],"./cypher/cypher.js":[395,41],"./d/d.js":[396,42],"./dart/dart.js":[397,2,43],"./diff/diff.js":[398,44],"./django/django.js":[399,0,1,11],"./dockerfile/dockerfile.js":[400,21],"./dtd/dtd.js":[401,45],"./dylan/dylan.js":[402,46],"./ebnf/ebnf.js":[403,47],"./ecl/ecl.js":[404,48],"./eiffel/eiffel.js":[405,49],"./elm/elm.js":[406,50],"./erlang/erlang.js":[407,51],"./factor/factor.js":[408,22],"./fcl/fcl.js":[409,52],"./forth/forth.js":[410,53],"./fortran/fortran.js":[411,54],"./gas/gas.js":[412,55],"./gfm/gfm.js":[413,4,20],"./gherkin/gherkin.js":[414,56],"./go/go.js":[415,57],"./groovy/groovy.js":[416,58],"./haml/haml.js":[417,0,1,14],"./handlebars/handlebars.js":[376,16],"./haskell-literate/haskell-literate.js":[418,26],"./haskell/haskell.js":[377,59],"./haxe/haxe.js":[419,60],"./htmlembedded/htmlembedded.js":[420,0,1,10],"./htmlmixed/htmlmixed.js":[370,0,1,27],"./http/http.js":[421,61],"./idl/idl.js":[422,62],"./javascript/javascript.js":[372,0],"./jinja2/jinja2.js":[423,63],"./jsx/jsx.js":[424,0,28],"./julia/julia.js":[425,64],"./livescript/livescript.js":[426,65],"./lua/lua.js":[427,66],"./markdown/markdown.js":[382,4],"./mathematica/mathematica.js":[428,67],"./mbox/mbox.js":[429,68],"./meta.js":[69],"./mirc/mirc.js":[430,69],"./mllike/mllike.js":[431,70],"./modelica/modelica.js":[432,71],"./mscgen/mscgen.js":[433,72],"./mumps/mumps.js":[434,73],"./nginx/nginx.js":[435,74],"./nsis/nsis.js":[436,23],"./ntriples/ntriples.js":[437,75],"./octave/octave.js":[438,76],"./oz/oz.js":[439,77],"./pascal/pascal.js":[440,78],"./pegjs/pegjs.js":[441,0,79],"./perl/perl.js":[442,80],"./php/php.js":[443,0,1,2,17],"./pig/pig.js":[444,81],"./powershell/powershell.js":[445,82],"./properties/properties.js":[446,83],"./protobuf/protobuf.js":[447,84],"./pug/pug.js":[383,0,1,3],"./puppet/puppet.js":[448,85],"./python/python.js":[378,86],"./q/q.js":[449,87],"./r/r.js":[450,88],"./rpm/rpm.js":[451,89],"./rst/rst.js":[452,13],"./ruby/ruby.js":[373,90],"./rust/rust.js":[453,24],"./sas/sas.js":[454,91],"./sass/sass.js":[380,1,92],"./scheme/scheme.js":[455,93],"./shell/shell.js":[456,94],"./sieve/sieve.js":[457,95],"./slim/slim.js":[458,0,1,15],"./smalltalk/smalltalk.js":[459,96],"./smarty/smarty.js":[460,97],"./solr/solr.js":[461,98],"./soy/soy.js":[462,0,1,18],"./sparql/sparql.js":[463,99],"./spreadsheet/spreadsheet.js":[464,100],"./sql/sql.js":[465,101],"./stex/stex.js":[379,102],"./stylus/stylus.js":[384,5],"./swift/swift.js":[466,103],"./tcl/tcl.js":[467,104],"./textile/textile.js":[468,105],"./tiddlywiki/tiddlywiki.js":[469,106],"./tiki/tiki.js":[470,107],"./toml/toml.js":[471,108],"./tornado/tornado.js":[472,0,1,12],"./troff/troff.js":[473,109],"./ttcn-cfg/ttcn-cfg.js":[475,110],"./ttcn/ttcn.js":[474,111],"./turtle/turtle.js":[476,112],"./twig/twig.js":[477,19],"./vb/vb.js":[478,113],"./vbscript/vbscript.js":[479,114],"./velocity/velocity.js":[480,115],"./verilog/verilog.js":[481,116],"./vhdl/vhdl.js":[482,117],"./vue/vue.js":[483,0,1,5,3,9],"./wast/wast.js":[484,25],"./webidl/webidl.js":[485,118],"./xml/xml.js":[369,119],"./xquery/xquery.js":[486,120],"./yacas/yacas.js":[487,121],"./yaml-frontmatter/yaml-frontmatter.js":[488,29],"./yaml/yaml.js":[381,122],"./z80/z80.js":[489,123]};function s(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a.t(s,7)}))}s.keys=function(){return Object.keys(n)},s.id=134,e.exports=s},347:function(e,t,a){},368:function(e,t,a){"use strict";a.r(t);var n=a(4),s=a.n(n),o=a(6),i=a(0),r=a.n(i),l=a(9),c=a.n(l),d=(a(111),a(112),a(7)),u=a(8),m=a(82),h=a.n(m),f=a(83),j=a.n(f),p=function(){function e(t,a){Object(d.a)(this,e),this._dateId=t,this._text=a.trim()}return Object(u.a)(e,[{key:"dateId",get:function(){return this._dateId}},{key:"text",get:function(){return this._text},set:function(e){this._text=e}},{key:"html",get:function(){return j.a.sanitize(h()(this._text))}}]),e}(),y=function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,null,[{key:"getIso8601z",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="date"in e?e.date:new Date,a="onlyDate"in e&&e.onlyDate,n="timeSeparator"in e?e.timeSeparator:":",s=!("withTimezone"in e)||e.withTimezone,o=t.getTimezoneOffset(),i=parseInt(Math.abs(o/60)),r=Math.abs(o%60),l=null;i<10&&(i="0".concat(i)),r<10&&(r="0".concat(r)),o<0?l="+".concat(i,":").concat(r):o>0?l="-".concat(i,":").concat(r):0===o&&(l="Z");var c=t.getDate(),d=t.getMonth()+1,u=t.getFullYear(),m=t.getHours(),h=t.getMinutes(),f=t.getSeconds(),j=null;return c=c<10?"0".concat(c):c,d=d<10?"0".concat(d):d,m=m<10?"0".concat(m):m,h=h<10?"0".concat(h):h,f=f<10?"0".concat(f):f,j="".concat(u,"-").concat(d,"-").concat(c,"T").concat(m).concat(n).concat(h).concat(n).concat(f),a?"".concat(u,"-").concat(d,"-").concat(c):s?"".concat(j).concat(l):j}},{key:"isItToday",value:function(t){return e.getIso8601z({onlyDate:!0})===t.slice(0,10)}},{key:"dayDeltaFromToday",value:function(t){var a=new Date(e.getIso8601z({onlyDate:!0}));return(new Date(t)-a)/864e5}},{key:"getDayRelativeTo",value:function(t,a){var n=new Date(t);return n.setDate(n.getDate()+a),e.getIso8601z({date:n,onlyDate:!0})}},{key:"downloadJSON",value:function(e,t){var a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),e}(),v=a(48),g=new(function(){function e(){Object(d.a)(this,e),this._collection={}}return Object(u.a)(e,[{key:"exportJsonSnapshot",value:function(){var e=this,t={};return Object.keys(this._collection).forEach((function(a){t[a]=e._collection[a].text})),JSON.stringify(t)}},{key:"downloadSnapshot",value:function(){var e=this.exportJsonSnapshot(),t="todatoday_snapshot_".concat(y.getIso8601z({timeSeparator:"-",withTimezone:!1}),".json");y.downloadJSON(t,e)}},{key:"load",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,a,n,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("today_dateIdList",null);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t=JSON.parse(t),a=0;case 7:if(!(a<t.length)){e.next=16;break}return n=t[a],e.next=11,v.a.get(t[a]);case 11:o=e.sent,this.setEntry(n,o);case 13:a+=1,e.next=7;break;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateImmortalIndex",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.set("today_dateIdList",JSON.stringify(Object.keys(this._collection)));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setEntry",value:function(e,t){var a=t.trim();if(0!==a.length){var n=!1;e in this._collection||(n=!0),this._collection[e]=new p(e,a),v.a.set(e,a),n&&this.updateImmortalIndex()}else this.deleteEntry(e)}},{key:"getEntry",value:function(e){return e in this._collection?this._collection[e]:null}},{key:"hasEntry",value:function(e){return e in this._collection}},{key:"deleteEntry",value:function(e){e in this._collection&&(delete this._collection[e],v.a.remove(e).then((function(e){return console.log(e)})).catch((function(e){return console.log("err",e)}))),this.updateImmortalIndex()}}]),e}()),E=a(28),k=a(27),b=(a(113),a(496)),w=a(491),D=a(497),x=a(498),O=a(495),S=a(503),_=a(490),T=a(492),I=a(499),z=new(a(101).a);z.set("selectedDate",y.getIso8601z({onlyDate:!0}));var M=z,C=a(98),N=(a(114),a(115),function(e){Object(E.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).dlSnapshot=function(){g.downloadSnapshot()},n.state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"side-panel"},r.a.createElement(C.a,{className:"calendar",value:new Date(M.get("selectedDate")),onChange:function(t){console.log(t),M.set("selectedDate",y.getIso8601z({date:t,onlyDate:!0})),e.props.hideDrawer()}}),r.a.createElement(_.a,null),r.a.createElement(T.a,{className:"wide-button",type:"primary",icon:r.a.createElement(I.a,null),size:"large",onClick:this.dlSnapshot},"Export snapshot"))}}]),a}(r.a.Component)),R=a(494),q=a(493),A=a(500),J=a(501),L=a(502),F=a(99),U=(a(137),a(86)),H=a.n(U),V=(a(346),a(347),function(e){Object(E.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).highlight=function(){!n.state.editionMode&&n._htmlDivRef.current&&n._htmlDivRef.current.querySelectorAll("pre").forEach((function(e){H.a.highlightBlock(e)}))},n.onTextUpdate=function(e,t){n._editText=e.getValue()},n.textSave=function(){g.setEntry(n.state.selectedDate,n._editText),n.setState({editionMode:!1})},n.goEdit=function(){n.setState({editionMode:!0}),R.a.info({message:"Tips",description:"Press Escape key to save!",placement:"bottomRight"})},n.previousDay=function(e){e.preventDefault(),M.set("selectedDate",y.getDayRelativeTo(n.state.selectedDate,-1))},n.nextDay=function(e){e.preventDefault(),M.set("selectedDate",y.getDayRelativeTo(n.state.selectedDate,1))},n.handleEditorDidMount=function(e,t){n.editor=t,n.setState({isEditorReady:!0})},n.state={selectedDate:M.get("selectedDate"),editionMode:!1,isEditorReady:!1},n._htmlDivRef=r.a.createRef(),n._editText="",n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",(function(t){e.state.editionMode&&"Escape"===t.key&&e.textSave(),e.state.editionMode||"Enter"!==t.key||e.goEdit(),"ArrowLeft"===t.key&&e.previousDay(t),"ArrowRight"===t.key&&e.nextDay(t)})),M.on("set:selectedDate",(function(t){e.setState({selectedDate:t.value})})),this.highlight()}},{key:"componentDidUpdate",value:function(){this.state.editionMode,this.highlight()}},{key:"render",value:function(){var e=this.state.selectedDate,t=g.getEntry(e);this._editText=t?t.text:"";var a=t?t.html:"",n=new Date(e).toDateString(),s=null;if(y.isItToday(e))s=r.a.createElement("div",{className:"date-title"},r.a.createElement("div",{style:{fontSize:"2em"}},"Today"),r.a.createElement("div",{style:{marginLeft:5,color:"#aaa"}},n));else{var o=y.dayDeltaFromToday(e),i=Math.abs(o),l=o<0?"".concat(i," days ago"):"in ".concat(i," day").concat(i>1?"s":""," from now");s=r.a.createElement("div",{className:"date-title"},r.a.createElement("div",{style:{fontSize:"2em"}},n),r.a.createElement("div",{style:{marginLeft:5,color:"#aaa"}},l))}var c=r.a.createElement(D.a,{align:"middle"},r.a.createElement(x.a,{span:6,style:{textAlign:"right"}},r.a.createElement(q.a,{placement:"left",title:"Keyboard left key \u26a1"},r.a.createElement(A.a,{className:"arrow-day",onClick:this.previousDay}))),r.a.createElement(x.a,{span:12},s),r.a.createElement(x.a,{span:6,style:{textAlign:"left"}},r.a.createElement(q.a,{placement:"right",title:"Keyboard right key \u26a1"},r.a.createElement(J.a,{className:"arrow-day",onClick:this.nextDay})))),d=null,u=null;return this.state.editionMode?(console.log("EDIT MODE"),u=r.a.createElement(D.a,{justify:"center"},r.a.createElement(T.a,{type:"primary",onClick:this.textSave},"Save")),d=r.a.createElement("div",{className:"editor-container"},r.a.createElement(F.a,{height:"65vh",value:this._editText,onChange:this.onTextUpdate,options:{tabSize:2,mode:"markdown",lineWrapping:!0,autofocus:!0,placeholder:"today today is Markdown-friendly!"}}))):(console.log("READ MODE"),u=r.a.createElement(D.a,{justify:"center"},r.a.createElement(T.a,{type:"primary",onClick:this.goEdit},"Edit")),d=r.a.createElement("div",null,r.a.createElement(_.a,null),r.a.createElement(q.a,{placement:"top",title:"Double click to edit \u26a1",destroyTooltipOnHide:!0},r.a.createElement("div",{className:"text-corpus",ref:this._htmlDivRef,dangerouslySetInnerHTML:{__html:a},onDoubleClick:this.goEdit})),r.a.createElement(_.a,null))),null!==t||this.state.editionMode||(u=null,d=r.a.createElement("div",{style:{height:"50vh",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",width:"fit-content",height:"fit-content",textAlign:"center",border:"dashed 1px #8ac7ff",padding:20}},r.a.createElement("div",{style:{}},r.a.createElement("div",null,r.a.createElement(L.a,{style:{fontSize:50,color:"#8ac7ff"}})),r.a.createElement("div",{style:{margin:20}},"Nothing yet, let's write something!"),r.a.createElement("div",null,r.a.createElement(T.a,{type:"primary",onClick:this.goEdit},"Write")))))),r.a.createElement("div",{className:"central-display"},c,d,u)}}]),a}(r.a.Component)),K=b.a.Header,W=(b.a.Footer,b.a.Sider,b.a.Content);document.addEventListener("keydown",(function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),g.downloadSnapshot())}),!1);var P=function(e){Object(E.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).showDrawer=function(){n.setState({drawerVisible:!0})},n.hideDrawer=function(){n.setState({drawerVisible:!1})},n.backOnToday=function(){M.set("selectedDate",y.getIso8601z({onlyDate:!0}))},n.state={drawerVisible:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=r.a.createElement("span",{className:"today-logo"},r.a.createElement("span",{style:{fontWeight:600,marginRight:"0.25em"}},"today"),r.a.createElement("span",{style:{fontWeight:300}},"today")),t=r.a.createElement("span",null,"Made by ",r.a.createElement("a",{href:"https://twitter.com/jonathanlurie"},"@jonathanlurie"),". Fork it on ",r.a.createElement("a",{href:"https://github.com/jonathanlurie/todaytoday"},"GitHub"),".");return r.a.createElement(b.a,{style:{background:"#fff"}},r.a.createElement(K,{style:{background:"white"}},r.a.createElement(w.a,{size:"middle"},r.a.createElement(S.a,{onClick:this.showDrawer}),r.a.createElement("div",{onClick:this.backOnToday},e))),r.a.createElement(D.a,null,r.a.createElement(x.a,{xs:2,sm:2,md:4,lg:4,xl:6}),r.a.createElement(x.a,{xs:20,sm:20,md:16,lg:16,xl:12},r.a.createElement(W,null,r.a.createElement(V,null))),r.a.createElement(x.a,{xs:2,sm:2,md:4,lg:4,xl:6})),r.a.createElement(O.a,{title:e,placement:"left",closable:!1,onClose:this.hideDrawer,visible:this.state.drawerVisible,width:350,footer:t},r.a.createElement(N,{hideDrawer:this.hideDrawer})))}}]),a}(r.a.Component);Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.load();case 2:c.a.render(r.a.createElement(P,null),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))()}},[[106,7,8]]]);
//# sourceMappingURL=main.ffcbf3bb.chunk.js.map