(this.webpackJsonptoday=this.webpackJsonptoday||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},108:function(e,t,a){},110:function(e,t,a){},138:function(e,t,a){},381:function(e,t,a){"use strict";a.r(t);var n=a(4),i=a.n(n),o=a(7),r=a(0),c=a.n(r),l=a(10),s=a.n(l),d=(a(105),a(106),a(8)),u=a(9),h=a(72),m=a.n(h),f=a(73),y=a.n(f),g=function(){function e(t,a){Object(d.a)(this,e),this._dateId=t,this._text=a.trim()}return Object(u.a)(e,[{key:"dateId",get:function(){return this._dateId}},{key:"text",get:function(){return this._text},set:function(e){this._text=e}},{key:"html",get:function(){return y.a.sanitize(m()(this._text))}}]),e}(),v=a(41),E=new(function(){function e(){Object(d.a)(this,e),this._collection={}}return Object(u.a)(e,[{key:"load",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("today_dateIdList",null);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:t=JSON.parse(t),a=0;case 7:if(!(a<t.length)){e.next=16;break}return n=t[a],e.next=11,v.a.get(t[a]);case 11:o=e.sent,this.setEntry(n,o);case 13:a+=1,e.next=7;break;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateImmortalIndex",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.set("today_dateIdList",JSON.stringify(Object.keys(this._collection)));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setEntry",value:function(e,t){var a=t.trim();if(0!==a.length){var n=!1;e in this._collection||(n=!0),this._collection[e]=new g(e,a),v.a.set(e,a),n&&this.updateImmortalIndex()}else this.deleteEntry(e)}},{key:"getEntry",value:function(e){return e in this._collection?this._collection[e]:null}},{key:"hasEntry",value:function(e){return e in this._collection}},{key:"deleteEntry",value:function(e){e in this._collection&&(delete this._collection[e],v.a.remove(e).then((function(e){return console.log(e)})).catch((function(e){return console.log("err",e)}))),this.updateImmortalIndex()}}]),e}()),p=a(22),D=a(21),b=(a(107),a(108),a(387)),k=a(383),x=a(388),w=a(389),O=a(386),_=a(393),j=a(92),I=function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,null,[{key:"getIso8601z",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="date"in e?e.date:new Date,a="onlyDate"in e&&e.onlyDate,n=t.getTimezoneOffset(),i=parseInt(Math.abs(n/60)),o=Math.abs(n%60),r=null;i<10&&(i="0".concat(i)),o<10&&(o="0".concat(o)),n<0?r="+".concat(i,":").concat(o):n>0?r="-".concat(i,":").concat(o):0===n&&(r="Z");var c=t.getDate(),l=t.getMonth()+1,s=t.getFullYear(),d=t.getHours(),u=t.getMinutes(),h=t.getSeconds(),m=null;return c=c<10?"0".concat(c):c,l=l<10?"0".concat(l):l,d=d<10?"0".concat(d):d,u=u<10?"0".concat(u):u,h=h<10?"0".concat(h):h,m="".concat(s,"-").concat(l,"-").concat(c,"T").concat(d,":").concat(u,":").concat(h),a?"".concat(s,"-").concat(l,"-").concat(c):"".concat(m).concat(r)}},{key:"isItToday",value:function(t){return e.getIso8601z({onlyDate:!0})===t.slice(0,10)}},{key:"dayDeltaFromToday",value:function(t){var a=new Date(e.getIso8601z({onlyDate:!0}));return(new Date(t)-a)/864e5}},{key:"getDayRelativeTo",value:function(t,a){var n=new Date(t);return n.setDate(n.getDate()+a),e.getIso8601z({date:n,onlyDate:!0})}}]),e}(),M=new j.a;M.set("selectedDate",I.getIso8601z({onlyDate:!0}));var S=M,T=a(91),C=(a(109),a(110),function(e){Object(p.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"side-panel"},c.a.createElement(T.a,{className:"calendar",onChange:function(t){console.log(t),S.set("selectedDate",I.getIso8601z({date:t,onlyDate:!0})),e.props.hideDrawer()}}))}}]),a}(c.a.Component)),z=a(385),N=a(384),R=a(382),L=a(55),A=a(390),F=a(391),H=a(392),J=(a(138),a(74)),V=a.n(J),W=(a(347),function(e){Object(p.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).highlight=function(){!n.state.editionMode&&n._htmlDivRef.current&&n._htmlDivRef.current.querySelectorAll("pre").forEach((function(e){console.log("node",e),V.a.highlightBlock(e)}))},n.onTextUpdate=function(e,t){n._editText=t},n.textSave=function(){E.setEntry(n.state.selectedDate,n._editText),n.setState({editionMode:!1})},n.goEdit=function(){n.setState({editionMode:!0}),z.a.info({message:"Tips",description:"Press Escape key to save!",placement:"bottomRight"})},n.previousDay=function(e){e.preventDefault(),S.set("selectedDate",I.getDayRelativeTo(n.state.selectedDate,-1))},n.nextDay=function(e){e.preventDefault(),S.set("selectedDate",I.getDayRelativeTo(n.state.selectedDate,1))},n.handleEditorDidMount=function(e,t){n.editor=t,n.setState({isEditorReady:!0})},n.state={selectedDate:S.get("selectedDate"),editionMode:!1,isEditorReady:!1},n._htmlDivRef=c.a.createRef(),n._editText="",n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",(function(t){e.state.editionMode&&"Escape"===t.key&&e.textSave()})),S.on("set:selectedDate",(function(t){e.setState({selectedDate:t.value})})),this.highlight()}},{key:"componentDidUpdate",value:function(){this.state.editionMode,this.highlight()}},{key:"render",value:function(){var e=this.state.selectedDate,t=E.getEntry(e);this._editText=t?t.text:"";var a=t?t.html:"",n=new Date(e).toDateString(),i=null;if(I.isItToday(e))i=c.a.createElement("div",{className:"date-title"},c.a.createElement("div",{style:{fontSize:"2em"}},"Today"),c.a.createElement("div",{style:{marginLeft:5,color:"#aaa"}},n));else{var o=I.dayDeltaFromToday(e),r=Math.abs(o),l=o<0?"".concat(r," days ago"):"in ".concat(r," day").concat(r>1?"s":""," from now");i=c.a.createElement("div",{className:"date-title"},c.a.createElement("div",{style:{fontSize:"2em"}},n),c.a.createElement("div",{style:{marginLeft:5,color:"#aaa"}},l))}var s=c.a.createElement(x.a,{align:"middle"},c.a.createElement(w.a,{span:6,style:{textAlign:"right"}},c.a.createElement(A.a,{className:"arrow-day",onClick:this.previousDay})),c.a.createElement(w.a,{span:12},i),c.a.createElement(w.a,{span:6,style:{textAlign:"left"}},c.a.createElement(F.a,{className:"arrow-day",onClick:this.nextDay}))),d=null,u=null;return this.state.editionMode?(console.log("EDIT MODE"),u=c.a.createElement(x.a,{justify:"center"},c.a.createElement(N.a,{type:"primary",onClick:this.textSave},"Save")),d=c.a.createElement("div",{className:"editor-container"},c.a.createElement(L.ControlledEditor,{className:"monaco-editor",language:"markdown",theme:"light",options:{fontSize:16,wordWrap:"on",minimap:{enabled:!1},scrollbar:{useShadows:!1},renderLineHighlight:"none",lineNumbersMinChars:3,autoClosingQuotes:"always"},value:this._editText,editorDidMount:this.handleEditorDidMount,onChange:this.onTextUpdate}))):(console.log("READ MODE"),u=c.a.createElement(x.a,{justify:"center"},c.a.createElement(N.a,{type:"primary",onClick:this.goEdit},"Edit")),d=c.a.createElement("div",null,c.a.createElement(R.a,null),c.a.createElement("div",{ref:this._htmlDivRef,dangerouslySetInnerHTML:{__html:a},onDoubleClick:this.goEdit}),c.a.createElement(R.a,null))),null!==t||this.state.editionMode||(u=null,d=c.a.createElement("div",{style:{height:"50vh",position:"relative"}},c.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",width:"fit-content",height:"fit-content",textAlign:"center",border:"dashed 1px #8ac7ff",padding:20}},c.a.createElement("div",{style:{}},c.a.createElement("div",null,c.a.createElement(H.a,{style:{fontSize:50,color:"#8ac7ff"}})),c.a.createElement("div",{style:{margin:20}},"Nothing yet, let's write something!"),c.a.createElement("div",null,c.a.createElement(N.a,{type:"primary",onClick:this.goEdit},"Write")))))),c.a.createElement("div",{className:"central-display"},s,d,u)}}]),a}(c.a.Component)),U=b.a.Header,B=(b.a.Footer,b.a.Sider,b.a.Content),q=function(e){Object(p.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).showDrawer=function(){n.setState({drawerVisible:!0})},n.hideDrawer=function(){n.setState({drawerVisible:!1})},n.backOnToday=function(){S.set("selectedDate",I.getIso8601z({onlyDate:!0}))},n.state={drawerVisible:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=c.a.createElement("span",{className:"today-logo"},c.a.createElement("span",{style:{fontWeight:600,marginRight:"0.25em"}},"today"),c.a.createElement("span",{style:{fontWeight:300}},"today")),t=c.a.createElement("span",null,"Made by ",c.a.createElement("a",{href:"https://twitter.com/jonathanlurie"},"@jonathanlurie"),". Fork it on ",c.a.createElement("a",{href:"https://github.com/jonathanlurie/todaytoday"},"GitHub"),".");return c.a.createElement(b.a,{style:{background:"#fff"}},c.a.createElement(U,{style:{background:"white"}},c.a.createElement(k.a,{size:"middle"},c.a.createElement(_.a,{onClick:this.showDrawer}),c.a.createElement("div",{onClick:this.backOnToday},e))),c.a.createElement(x.a,null,c.a.createElement(w.a,{xs:2,sm:2,md:4,lg:4,xl:6}),c.a.createElement(w.a,{xs:20,sm:20,md:16,lg:16,xl:12},c.a.createElement(B,null,c.a.createElement(W,null))),c.a.createElement(w.a,{xs:2,sm:2,md:4,lg:4,xl:6})),c.a.createElement(O.a,{title:e,placement:"left",closable:!1,onClose:this.hideDrawer,visible:this.state.drawerVisible,width:350,footer:t},c.a.createElement(C,{hideDrawer:this.hideDrawer})))}}]),a}(c.a.Component);Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.load();case 2:s.a.render(c.a.createElement(q,null),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))()},99:function(e,t,a){e.exports=a(381)}},[[99,1,2]]]);
//# sourceMappingURL=main.24858463.chunk.js.map