{"version":3,"sources":["../node_modules/codemirror/mode lazy /^/.//.*/.js$/ groupOptions: {} namespace object","core/Entry.js","core/Tools.js","core/EntryCollection.js","core/Store.js","views/SidePanel/index.js","views/CentralDisplay/index.js","App.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","t","keys","Object","module","exports","Entry","dateId","text","this","_dateId","_text","trim","DOMPurify","sanitize","Marked","Tools","options","date","Date","onlyDate","timeSeparator","withTimezone","timezoneOffsetMin","getTimezoneOffset","offsetHours","parseInt","Math","abs","offsetMinutes","timezoneStandard","currentDate","getDate","currentMonth","getMonth","currentYear","getFullYear","currentHours","getHours","currentMinutes","getMinutes","currentSeconds","getSeconds","currentDatetime","day","getIso8601z","today","delta","refDay","setDate","filename","element","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","MyEntryCollection","_collection","simplified","forEach","JSON","stringify","jsonSnapshot","exportJsonSnapshot","downloadJSON","ImmortalDB","get","dateListIds","parse","i","length","setEntry","set","trimmedText","updateIndexImmortal","updateImmortalIndex","deleteEntry","detaId","remove","a","console","log","catch","err","Store","Yetanotherstore","SidePanel","props","dlSnapshot","EntryCollection","downloadSnapshot","state","className","value","onChange","hideDrawer","type","icon","DownloadOutlined","size","onClick","React","Component","CentralDisplay","highlight","editionMode","_htmlDivRef","current","querySelectorAll","node","hljs","highlightBlock","onTextUpdate","codeMirrorInstance","changes","_editText","getValue","textSave","selectedDate","setState","goEdit","notification","info","message","description","placement","previousDay","evt","preventDefault","getDayRelativeTo","nextDay","handleEditorDidMount","_","editor","isEditorReady","createRef","addEventListener","key","on","entry","getEntry","textHtml","html","dateString","toDateString","dateTitleComp","isItToday","fontSize","marginLeft","color","dayDiff","dayDeltaFromToday","absDiff","dateDiffStr","header","align","span","textAlign","title","CaretLeftOutlined","CaretRightOutlined","displayDiv","buttonToShow","justify","height","tabSize","mode","lineWrapping","autofocus","placeholder","destroyTooltipOnHide","ref","dangerouslySetInnerHTML","__html","onDoubleClick","position","top","bottom","left","right","margin","width","border","padding","QuestionCircleOutlined","Header","Layout","Content","Footer","Sider","window","navigator","platform","match","metaKey","ctrlKey","keyCode","App","showDrawer","drawerVisible","backOnToday","logo","fontWeight","marginRight","footer","href","background","MenuOutlined","xs","sm","md","lg","xl","closable","onClose","visible","load","ReactDOM","render","getElementById"],"mappings":"2LAAA,IAAIA,EAAM,CACT,eAAgB,CACf,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,mBAAoB,CACnB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,mBAAoB,CACnB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iCAAkC,CACjC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,eAAgB,CACf,IACA,GAED,qBAAsB,CACrB,IACA,IAED,WAAY,CACX,IACA,IAED,iBAAkB,CACjB,IACA,EACA,IAED,iBAAkB,CACjB,IACA,IAED,qBAAsB,CACrB,IACA,EACA,EACA,IAED,6BAA8B,CAC7B,IACA,IAED,eAAgB,CACf,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,IAED,qBAAsB,CACrB,IACA,IAED,eAAgB,CACf,IACA,IAED,qBAAsB,CACrB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,eAAgB,CACf,IACA,IAED,mBAAoB,CACnB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,eAAgB,CACf,IACA,IAED,eAAgB,CACf,IACA,EACA,IAED,uBAAwB,CACvB,IACA,IAED,aAAc,CACb,IACA,IAED,qBAAsB,CACrB,IACA,IAED,iBAAkB,CACjB,IACA,EACA,EACA,IAED,6BAA8B,CAC7B,IACA,IAED,yCAA0C,CACzC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iCAAkC,CACjC,IACA,EACA,EACA,IAED,2BAA4B,CAC3B,IACA,EACA,EACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,IAED,6BAA8B,CAC7B,IACA,GAED,qBAAsB,CACrB,IACA,IAED,eAAgB,CACf,IACA,EACA,IAED,mBAAoB,CACnB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,eAAgB,CACf,IACA,IAED,yBAA0B,CACzB,IACA,GAED,+BAAgC,CAC/B,IACA,IAED,iBAAkB,CACjB,IACA,IAED,YAAa,CACZ,IAED,iBAAkB,CACjB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,aAAc,CACb,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mBAAoB,CACnB,IACA,EACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,EACA,EACA,EACA,IAED,eAAgB,CACf,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,eAAgB,CACf,IACA,EACA,EACA,GAED,qBAAsB,CACrB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,WAAY,CACX,IACA,IAED,WAAY,CACX,IACA,IAED,eAAgB,CACf,IACA,IAED,eAAgB,CACf,IACA,IAED,iBAAkB,CACjB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,IAED,iBAAkB,CACjB,IACA,EACA,IAED,qBAAsB,CACrB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,mBAAoB,CACnB,IACA,IAED,iBAAkB,CACjB,IACA,EACA,EACA,IAED,2BAA4B,CAC3B,IACA,IAED,qBAAsB,CACrB,IACA,IAED,iBAAkB,CACjB,IACA,IAED,eAAgB,CACf,IACA,EACA,EACA,IAED,qBAAsB,CACrB,IACA,IAED,+BAAgC,CAC/B,IACA,KAED,eAAgB,CACf,IACA,KAED,iBAAkB,CACjB,IACA,KAED,qBAAsB,CACrB,IACA,GAED,mBAAoB,CACnB,IACA,KAED,eAAgB,CACf,IACA,KAED,uBAAwB,CACvB,IACA,KAED,6BAA8B,CAC7B,IACA,KAED,iBAAkB,CACjB,IACA,KAED,iBAAkB,C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","file":"static/js/main.ffcbf3bb.chunk.js","sourcesContent":["var map = {\n\t\"./apl/apl.js\": [\n\t\t385,\n\t\t30\n\t],\n\t\"./asciiarmor/asciiarmor.js\": [\n\t\t386,\n\t\t31\n\t],\n\t\"./asn.1/asn.1.js\": [\n\t\t387,\n\t\t32\n\t],\n\t\"./asterisk/asterisk.js\": [\n\t\t388,\n\t\t33\n\t],\n\t\"./brainfuck/brainfuck.js\": [\n\t\t389,\n\t\t34\n\t],\n\t\"./clike/clike.js\": [\n\t\t374,\n\t\t2\n\t],\n\t\"./clojure/clojure.js\": [\n\t\t390,\n\t\t35\n\t],\n\t\"./cmake/cmake.js\": [\n\t\t391,\n\t\t36\n\t],\n\t\"./cobol/cobol.js\": [\n\t\t392,\n\t\t37\n\t],\n\t\"./coffeescript/coffeescript.js\": [\n\t\t375,\n\t\t38\n\t],\n\t\"./commonlisp/commonlisp.js\": [\n\t\t393,\n\t\t39\n\t],\n\t\"./crystal/crystal.js\": [\n\t\t394,\n\t\t40\n\t],\n\t\"./css/css.js\": [\n\t\t371,\n\t\t1\n\t],\n\t\"./cypher/cypher.js\": [\n\t\t395,\n\t\t41\n\t],\n\t\"./d/d.js\": [\n\t\t396,\n\t\t42\n\t],\n\t\"./dart/dart.js\": [\n\t\t397,\n\t\t2,\n\t\t43\n\t],\n\t\"./diff/diff.js\": [\n\t\t398,\n\t\t44\n\t],\n\t\"./django/django.js\": [\n\t\t399,\n\t\t0,\n\t\t1,\n\t\t11\n\t],\n\t\"./dockerfile/dockerfile.js\": [\n\t\t400,\n\t\t21\n\t],\n\t\"./dtd/dtd.js\": [\n\t\t401,\n\t\t45\n\t],\n\t\"./dylan/dylan.js\": [\n\t\t402,\n\t\t46\n\t],\n\t\"./ebnf/ebnf.js\": [\n\t\t403,\n\t\t47\n\t],\n\t\"./ecl/ecl.js\": [\n\t\t404,\n\t\t48\n\t],\n\t\"./eiffel/eiffel.js\": [\n\t\t405,\n\t\t49\n\t],\n\t\"./elm/elm.js\": [\n\t\t406,\n\t\t50\n\t],\n\t\"./erlang/erlang.js\": [\n\t\t407,\n\t\t51\n\t],\n\t\"./factor/factor.js\": [\n\t\t408,\n\t\t22\n\t],\n\t\"./fcl/fcl.js\": [\n\t\t409,\n\t\t52\n\t],\n\t\"./forth/forth.js\": [\n\t\t410,\n\t\t53\n\t],\n\t\"./fortran/fortran.js\": [\n\t\t411,\n\t\t54\n\t],\n\t\"./gas/gas.js\": [\n\t\t412,\n\t\t55\n\t],\n\t\"./gfm/gfm.js\": [\n\t\t413,\n\t\t4,\n\t\t20\n\t],\n\t\"./gherkin/gherkin.js\": [\n\t\t414,\n\t\t56\n\t],\n\t\"./go/go.js\": [\n\t\t415,\n\t\t57\n\t],\n\t\"./groovy/groovy.js\": [\n\t\t416,\n\t\t58\n\t],\n\t\"./haml/haml.js\": [\n\t\t417,\n\t\t0,\n\t\t1,\n\t\t14\n\t],\n\t\"./handlebars/handlebars.js\": [\n\t\t376,\n\t\t16\n\t],\n\t\"./haskell-literate/haskell-literate.js\": [\n\t\t418,\n\t\t26\n\t],\n\t\"./haskell/haskell.js\": [\n\t\t377,\n\t\t59\n\t],\n\t\"./haxe/haxe.js\": [\n\t\t419,\n\t\t60\n\t],\n\t\"./htmlembedded/htmlembedded.js\": [\n\t\t420,\n\t\t0,\n\t\t1,\n\t\t10\n\t],\n\t\"./htmlmixed/htmlmixed.js\": [\n\t\t370,\n\t\t0,\n\t\t1,\n\t\t27\n\t],\n\t\"./http/http.js\": [\n\t\t421,\n\t\t61\n\t],\n\t\"./idl/idl.js\": [\n\t\t422,\n\t\t62\n\t],\n\t\"./javascript/javascript.js\": [\n\t\t372,\n\t\t0\n\t],\n\t\"./jinja2/jinja2.js\": [\n\t\t423,\n\t\t63\n\t],\n\t\"./jsx/jsx.js\": [\n\t\t424,\n\t\t0,\n\t\t28\n\t],\n\t\"./julia/julia.js\": [\n\t\t425,\n\t\t64\n\t],\n\t\"./livescript/livescript.js\": [\n\t\t426,\n\t\t65\n\t],\n\t\"./lua/lua.js\": [\n\t\t427,\n\t\t66\n\t],\n\t\"./markdown/markdown.js\": [\n\t\t382,\n\t\t4\n\t],\n\t\"./mathematica/mathematica.js\": [\n\t\t428,\n\t\t67\n\t],\n\t\"./mbox/mbox.js\": [\n\t\t429,\n\t\t68\n\t],\n\t\"./meta.js\": [\n\t\t69\n\t],\n\t\"./mirc/mirc.js\": [\n\t\t430,\n\t\t69\n\t],\n\t\"./mllike/mllike.js\": [\n\t\t431,\n\t\t70\n\t],\n\t\"./modelica/modelica.js\": [\n\t\t432,\n\t\t71\n\t],\n\t\"./mscgen/mscgen.js\": [\n\t\t433,\n\t\t72\n\t],\n\t\"./mumps/mumps.js\": [\n\t\t434,\n\t\t73\n\t],\n\t\"./nginx/nginx.js\": [\n\t\t435,\n\t\t74\n\t],\n\t\"./nsis/nsis.js\": [\n\t\t436,\n\t\t23\n\t],\n\t\"./ntriples/ntriples.js\": [\n\t\t437,\n\t\t75\n\t],\n\t\"./octave/octave.js\": [\n\t\t438,\n\t\t76\n\t],\n\t\"./oz/oz.js\": [\n\t\t439,\n\t\t77\n\t],\n\t\"./pascal/pascal.js\": [\n\t\t440,\n\t\t78\n\t],\n\t\"./pegjs/pegjs.js\": [\n\t\t441,\n\t\t0,\n\t\t79\n\t],\n\t\"./perl/perl.js\": [\n\t\t442,\n\t\t80\n\t],\n\t\"./php/php.js\": [\n\t\t443,\n\t\t0,\n\t\t1,\n\t\t2,\n\t\t17\n\t],\n\t\"./pig/pig.js\": [\n\t\t444,\n\t\t81\n\t],\n\t\"./powershell/powershell.js\": [\n\t\t445,\n\t\t82\n\t],\n\t\"./properties/properties.js\": [\n\t\t446,\n\t\t83\n\t],\n\t\"./protobuf/protobuf.js\": [\n\t\t447,\n\t\t84\n\t],\n\t\"./pug/pug.js\": [\n\t\t383,\n\t\t0,\n\t\t1,\n\t\t3\n\t],\n\t\"./puppet/puppet.js\": [\n\t\t448,\n\t\t85\n\t],\n\t\"./python/python.js\": [\n\t\t378,\n\t\t86\n\t],\n\t\"./q/q.js\": [\n\t\t449,\n\t\t87\n\t],\n\t\"./r/r.js\": [\n\t\t450,\n\t\t88\n\t],\n\t\"./rpm/rpm.js\": [\n\t\t451,\n\t\t89\n\t],\n\t\"./rst/rst.js\": [\n\t\t452,\n\t\t13\n\t],\n\t\"./ruby/ruby.js\": [\n\t\t373,\n\t\t90\n\t],\n\t\"./rust/rust.js\": [\n\t\t453,\n\t\t24\n\t],\n\t\"./sas/sas.js\": [\n\t\t454,\n\t\t91\n\t],\n\t\"./sass/sass.js\": [\n\t\t380,\n\t\t1,\n\t\t92\n\t],\n\t\"./scheme/scheme.js\": [\n\t\t455,\n\t\t93\n\t],\n\t\"./shell/shell.js\": [\n\t\t456,\n\t\t94\n\t],\n\t\"./sieve/sieve.js\": [\n\t\t457,\n\t\t95\n\t],\n\t\"./slim/slim.js\": [\n\t\t458,\n\t\t0,\n\t\t1,\n\t\t15\n\t],\n\t\"./smalltalk/smalltalk.js\": [\n\t\t459,\n\t\t96\n\t],\n\t\"./smarty/smarty.js\": [\n\t\t460,\n\t\t97\n\t],\n\t\"./solr/solr.js\": [\n\t\t461,\n\t\t98\n\t],\n\t\"./soy/soy.js\": [\n\t\t462,\n\t\t0,\n\t\t1,\n\t\t18\n\t],\n\t\"./sparql/sparql.js\": [\n\t\t463,\n\t\t99\n\t],\n\t\"./spreadsheet/spreadsheet.js\": [\n\t\t464,\n\t\t100\n\t],\n\t\"./sql/sql.js\": [\n\t\t465,\n\t\t101\n\t],\n\t\"./stex/stex.js\": [\n\t\t379,\n\t\t102\n\t],\n\t\"./stylus/stylus.js\": [\n\t\t384,\n\t\t5\n\t],\n\t\"./swift/swift.js\": [\n\t\t466,\n\t\t103\n\t],\n\t\"./tcl/tcl.js\": [\n\t\t467,\n\t\t104\n\t],\n\t\"./textile/textile.js\": [\n\t\t468,\n\t\t105\n\t],\n\t\"./tiddlywiki/tiddlywiki.js\": [\n\t\t469,\n\t\t106\n\t],\n\t\"./tiki/tiki.js\": [\n\t\t470,\n\t\t107\n\t],\n\t\"./toml/toml.js\": [\n\t\t471,\n\t\t108\n\t],\n\t\"./tornado/tornado.js\": [\n\t\t472,\n\t\t0,\n\t\t1,\n\t\t12\n\t],\n\t\"./troff/troff.js\": [\n\t\t473,\n\t\t109\n\t],\n\t\"./ttcn-cfg/ttcn-cfg.js\": [\n\t\t475,\n\t\t110\n\t],\n\t\"./ttcn/ttcn.js\": [\n\t\t474,\n\t\t111\n\t],\n\t\"./turtle/turtle.js\": [\n\t\t476,\n\t\t112\n\t],\n\t\"./twig/twig.js\": [\n\t\t477,\n\t\t19\n\t],\n\t\"./vb/vb.js\": [\n\t\t478,\n\t\t113\n\t],\n\t\"./vbscript/vbscript.js\": [\n\t\t479,\n\t\t114\n\t],\n\t\"./velocity/velocity.js\": [\n\t\t480,\n\t\t115\n\t],\n\t\"./verilog/verilog.js\": [\n\t\t481,\n\t\t116\n\t],\n\t\"./vhdl/vhdl.js\": [\n\t\t482,\n\t\t117\n\t],\n\t\"./vue/vue.js\": [\n\t\t483,\n\t\t0,\n\t\t1,\n\t\t5,\n\t\t3,\n\t\t9\n\t],\n\t\"./wast/wast.js\": [\n\t\t484,\n\t\t25\n\t],\n\t\"./webidl/webidl.js\": [\n\t\t485,\n\t\t118\n\t],\n\t\"./xml/xml.js\": [\n\t\t369,\n\t\t119\n\t],\n\t\"./xquery/xquery.js\": [\n\t\t486,\n\t\t120\n\t],\n\t\"./yacas/yacas.js\": [\n\t\t487,\n\t\t121\n\t],\n\t\"./yaml-frontmatter/yaml-frontmatter.js\": [\n\t\t488,\n\t\t29\n\t],\n\t\"./yaml/yaml.js\": [\n\t\t381,\n\t\t122\n\t],\n\t\"./z80/z80.js\": [\n\t\t489,\n\t\t123\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 134;\nmodule.exports = webpackAsyncContext;","import Marked from 'marked'\nimport DOMPurify from 'dompurify'\n\nclass Entry {\n  constructor(dateId, text) {\n    this._dateId = dateId\n    this._text = text.trim()\n  }\n\n  get dateId() {\n    return this._dateId\n  }\n\n  get text() {\n    return this._text\n  }\n\n  set text(t) {\n    this._text = t\n  }\n\n  get html() {\n    return DOMPurify.sanitize(Marked(this._text))\n  }\n}\n\nexport default Entry","class Tools {\n\n  static getIso8601z(options = {}) {\n    const date = 'date' in options ? options.date : new Date()\n    const onlyDate = 'onlyDate' in options ? options.onlyDate : false\n    const timeSeparator = 'timeSeparator' in options ? options.timeSeparator : ':'\n    const withTimezone = 'withTimezone' in options ? options.withTimezone : true\n\n    // timezone part\n    const timezoneOffsetMin = date.getTimezoneOffset()\n    let offsetHours = parseInt(Math.abs(timezoneOffsetMin / 60))\n    let offsetMinutes = Math.abs(timezoneOffsetMin % 60)\n    let timezoneStandard = null\n  \n    if(offsetHours < 10) {\n      offsetHours = `0${offsetHours}`\n    }\n  \n    if(offsetMinutes < 10) {\n      offsetMinutes = `0${offsetMinutes}`\n    }\n  \n    // Add an opposite sign to the offset\n    // If offset is 0, it means timezone is UTC\n    if(timezoneOffsetMin < 0) {\n      timezoneStandard = `+${offsetHours}:${offsetMinutes}`\n    } else if(timezoneOffsetMin > 0) {\n      timezoneStandard = `-${offsetHours}:${offsetMinutes}`\n    } else if(timezoneOffsetMin === 0) {\n      timezoneStandard = 'Z'\n    }\n  \n    // date part\n    let currentDate = date.getDate()\n    let currentMonth = date.getMonth() + 1\n    let currentYear = date.getFullYear()\n    let currentHours = date.getHours()\n    let currentMinutes = date.getMinutes()\n    let currentSeconds = date.getSeconds()\n    let currentDatetime = null\n  \n    // Add 0 before date, month, hrs, mins or secs if they are less than 0\n    currentDate = currentDate < 10 ? `0${currentDate}` : currentDate;\n    currentMonth = currentMonth < 10 ? `0${currentMonth}` : currentMonth;\n    currentHours = currentHours < 10 ? `0${currentHours}` : currentHours;\n    currentMinutes = currentMinutes < 10 ? `0${currentMinutes}` : currentMinutes;\n    currentSeconds = currentSeconds < 10 ? `0${currentSeconds}` : currentSeconds;\n  \n    // Current datetime\n    // String such as 2016-07-16T19:20:30\n    currentDatetime = `${currentYear}-${currentMonth}-${currentDate}T${currentHours}${timeSeparator}${currentMinutes}${timeSeparator}${currentSeconds}`\n  \n    if (onlyDate) {\n      return `${currentYear}-${currentMonth}-${currentDate}`\n    }\n\n    if (!withTimezone) {\n      return currentDatetime\n    }\n    \n    return `${currentDatetime}${timezoneStandard}`\n  }\n\n\n  static isItToday(day) {\n    let today = Tools.getIso8601z({onlyDate: true})\n    return today === day.slice(0, 10)\n  }\n\n\n  static dayDeltaFromToday(day) {\n    const today = new Date(Tools.getIso8601z({onlyDate: true}))\n    const theOtherDay = new Date(day)\n\n    let diff = (theOtherDay - today) / (1000 * 3600 * 24)\n    return diff\n  }\n\n\n  static getDayRelativeTo(day, delta) {\n    const refDay = new Date(day)\n    refDay.setDate(refDay.getDate() + delta)\n    return Tools.getIso8601z({date: refDay, onlyDate: true})\n  }\n\n\n  // borrowed from\n  // https://stackoverflow.com/questions/3665115/how-to-create-a-file-in-memory-for-user-to-download-but-not-through-server\n  static downloadJSON(filename, text) {\n    const element = document.createElement('a')\n    element.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(text))\n    element.setAttribute('download', filename)\n    element.style.display = 'none'\n    document.body.appendChild(element)\n    element.click()\n    document.body.removeChild(element)\n  }\n\n}\n\nexport default Tools","import Entry from './Entry'\nimport Tools from './Tools'\nimport { ImmortalDB } from 'immortal-db'\n\nconst TODAY_DATE_ID_LIST = 'today_dateIdList'\n\nclass EntryCollection {\n  constructor() {\n    this._collection = {}\n  }\n\n\n  exportJsonSnapshot() {\n    const simplified = {}\n    Object.keys(this._collection).forEach((dateId) => {\n      simplified[dateId] = this._collection[dateId].text\n    })\n    return JSON.stringify(simplified)\n  }\n\n\n  downloadSnapshot() {\n    const jsonSnapshot = this.exportJsonSnapshot()\n    const filename = `todatoday_snapshot_${Tools.getIso8601z({timeSeparator: '-', withTimezone: false})}.json`\n    Tools.downloadJSON(filename, jsonSnapshot)\n  }\n\n  /**\n   * Fetch data from ImmortalDB\n   */\n  async load() {\n    let dateListIds = await ImmortalDB.get(TODAY_DATE_ID_LIST, null)\n\n    if (dateListIds === null) {\n      return\n    }\n\n    // the list in ImmortalDB is a JSON string\n    dateListIds = JSON.parse(dateListIds)\n\n    for (let i = 0; i < dateListIds.length; i += 1) {\n      let dateId = dateListIds[i]\n      let text = await ImmortalDB.get(dateListIds[i])\n      this.setEntry(dateId, text)\n    }\n  }\n\n\n  async updateImmortalIndex() {\n    await ImmortalDB.set(TODAY_DATE_ID_LIST, JSON.stringify(Object.keys(this._collection)))\n  }\n\n\n  setEntry(dateId, text) {\n    const trimmedText = text.trim()\n\n    // we dont keep blank\n    if (trimmedText.length === 0) {\n      this.deleteEntry(dateId)\n      return\n    }\n\n    let updateIndexImmortal = false\n    // if the dateId was not in the collection, then we need to update the list of ids in immortalDB\n    if (!(dateId in this._collection)) {\n      updateIndexImmortal = true\n    }\n\n    this._collection[dateId] = new Entry(dateId, trimmedText)\n\n    // updating ImmortalDB\n    ImmortalDB.set(dateId, trimmedText)\n\n    if (updateIndexImmortal) {\n      this.updateImmortalIndex()\n    }\n  }\n\n\n  getEntry(dateId) {\n    if (dateId in this._collection) {\n      return this._collection[dateId]\n    } else {\n      return null\n    }\n  }\n\n\n  hasEntry(detaId) {\n    return detaId in this._collection\n  }\n\n\n  deleteEntry(dateId) {\n    if (dateId in this._collection) {\n      delete this._collection[dateId]\n      ImmortalDB.remove(dateId)\n      .then((a) => console.log(a))\n      .catch((err) => console.log('err', err))\n    }\n    this.updateImmortalIndex()\n  }\n}\n\nconst MyEntryCollection = new EntryCollection()\n\nexport default MyEntryCollection","import Yetanotherstore from 'yetanotherstore'\nimport Tools from './Tools'\n\nconst Store = new Yetanotherstore()\n\nStore.set('selectedDate', Tools.getIso8601z({onlyDate: true}))\n\nexport default Store","import React from 'react'\nimport { Divider, Button } from 'antd'\nimport { DownloadOutlined } from '@ant-design/icons'\nimport Store from '../../core/Store'\nimport EntryCollection from '../../core/EntryCollection'\nimport Tools from '../../core/Tools'\nimport Calendar from 'react-calendar'\nimport 'react-calendar/dist/Calendar.css'\nimport './style.css'\n\nclass SidePanel extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n\n  dlSnapshot = () => {\n    EntryCollection.downloadSnapshot()\n  }\n\n  render() {\n    return (\n      <div\n        className=\"side-panel\"\n      >\n        <Calendar\n          className=\"calendar\"\n          value={new Date(Store.get('selectedDate'))}\n          onChange={(date) => {\n            console.log(date)\n            \n            Store.set('selectedDate', Tools.getIso8601z({date: date, onlyDate: true}))\n            this.props.hideDrawer()\n          }}\n        />\n        \n        <Divider />\n        <Button className=\"wide-button\" type=\"primary\" icon={<DownloadOutlined />} size=\"large\" onClick={this.dlSnapshot}>Export snapshot</Button>\n        \n      </div>\n    )\n  }\n}\n\nexport default SidePanel","import React from 'react'\nimport Store from '../../core/Store'\nimport {Button, Row, Col, Divider, notification, Tooltip } from 'antd'\nimport MyEntryCollection from '../../core/EntryCollection'\nimport { QuestionCircleOutlined, CaretLeftOutlined, CaretRightOutlined } from '@ant-design/icons'\nimport CodeMirror from '@uiw/react-codemirror'\nimport 'codemirror/addon/display/placeholder'\nimport Tools from '../../core/Tools'\nimport hljs from 'highlight.js'\nimport 'highlight.js/styles/github.css'\nimport './style.css'\n\nclass CentralDisplay extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      selectedDate: Store.get('selectedDate'),\n      editionMode: false,\n      isEditorReady: false,\n    }\n    this._htmlDivRef = React.createRef()\n    this._editText = ''\n  }\n\n\n\n\n  highlight = () => {\n    if (!this.state.editionMode && this._htmlDivRef.current) {\n      // console.log('this._htmlDivRef', this._htmlDivRef)\n        const nodes = this._htmlDivRef.current.querySelectorAll('pre')\n        nodes.forEach((node) => {\n          hljs.highlightBlock(node)\n        })\n    }\n  }\n\n\n  componentDidMount() {\n    // pressing Escape while in edition mode will saves and quit\n    document.addEventListener('keyup', (evt) => {\n      if(this.state.editionMode && evt.key === 'Escape') {\n       this.textSave()\n      }\n\n      if(!this.state.editionMode && evt.key === 'Enter') {\n        this.goEdit()\n      }\n\n      if(evt.key === 'ArrowLeft') {\n        this.previousDay(evt)\n      }\n\n      if(evt.key === 'ArrowRight') {\n        this.nextDay(evt)\n      }      \n    })\n\n    Store.on('set:selectedDate', (evt) => {\n      this.setState({selectedDate: evt.value})\n    })\n    this.highlight()\n  }\n\n\n  componentDidUpdate() {\n    if(this.state.editionMode) {\n      // this.refs.writeComponent.focus() \n    }\n    this.highlight()\n  }\n  \n\n  onTextUpdate = (codeMirrorInstance, changes) => {\n    // console.log('codeMirrorInstance ', codeMirrorInstance)\n    // console.log('changes ', changes)\n    \n    this._editText = codeMirrorInstance.getValue()\n  }\n\n  \n  textSave = () => {\n    MyEntryCollection.setEntry(this.state.selectedDate, this._editText)\n    this.setState({editionMode: false})\n  }\n\n\n  goEdit = () => {\n    this.setState({editionMode: true})\n\n    notification.info({\n      message: `Tips`,\n      description: 'Press Escape key to save!',\n      placement: 'bottomRight',\n    });\n  }\n\n  previousDay = (evt) => {\n    evt.preventDefault()\n    Store.set('selectedDate', Tools.getDayRelativeTo(this.state.selectedDate, -1))\n  }\n\n\n  nextDay = (evt) => {\n    evt.preventDefault()\n    Store.set('selectedDate', Tools.getDayRelativeTo(this.state.selectedDate, +1))\n  }\n\n\n  \n  render() {\n    let dateId = this.state.selectedDate\n    let entry = MyEntryCollection.getEntry(dateId)\n    this._editText = entry ? entry.text : ''\n    // let textHtml = hljs.highlightAuto(entry ? entry.html : '').value\n    let textHtml = entry ? entry.html : ''\n    \n    let dateString = (new Date(dateId)).toDateString()\n\n    let dateTitleComp = null\n\n    if (Tools.isItToday(dateId)) {\n      dateTitleComp = (\n        <div\n          className=\"date-title\"\n        >\n          <div style={{fontSize: '2em'}}>\n            Today\n          </div>\n          <div style={{\n            marginLeft: 5,\n            color: '#aaa'\n          }}>\n            {dateString}\n          </div>\n        </div>\n      )\n    } else {\n      const dayDiff = Tools.dayDeltaFromToday(dateId)\n      const absDiff = Math.abs(dayDiff)\n      const dateDiffStr = dayDiff < 0 ? `${absDiff} days ago` : `in ${absDiff} day${absDiff > 1 ? 's' : ''} from now`\n      dateTitleComp = (\n        <div\n          className=\"date-title\"\n        >\n          <div style={{fontSize: '2em'}}>\n            {dateString}\n          </div>\n          <div style={{\n            marginLeft: 5,\n            color: '#aaa'\n          }}>\n            {dateDiffStr}\n          </div>\n        </div>\n      )\n    }\n\n    let header = (\n      <Row align=\"middle\">\n        <Col span={6} style={{textAlign: 'right'}}>\n          <Tooltip placement=\"left\" title=\"Keyboard left key ⚡\">\n            <CaretLeftOutlined className=\"arrow-day\" onClick={this.previousDay}/>\n          </Tooltip>\n        </Col>\n        <Col span={12}>\n          {dateTitleComp}\n        </Col>\n        <Col span={6} style={{textAlign: 'left'}}>\n          <Tooltip placement=\"right\" title=\"Keyboard right key ⚡\">\n            <CaretRightOutlined className=\"arrow-day\" onClick={this.nextDay}/>\n          </Tooltip>\n        </Col>\n      </Row>\n    )\n\n\n    let displayDiv = null\n\n    let buttonToShow = null\n\n    if (this.state.editionMode) {\n      console.log('EDIT MODE')\n\n      buttonToShow = (\n        <Row justify=\"center\">\n          <Button type=\"primary\"  onClick={this.textSave}>Save</Button>\n        </Row>\n      )\n      \n      displayDiv = (\n          <div className=\"editor-container\">\n            <CodeMirror\n              height=\"65vh\"\n              value={this._editText}\n              onChange={this.onTextUpdate}\n              options={{\n                tabSize: 2,\n                mode: 'markdown',\n                lineWrapping: true,\n                autofocus: true,\n                placeholder: 'today today is Markdown-friendly!'\n              }}\n            />\n          </div>\n      )\n    } else {\n      console.log('READ MODE')\n      buttonToShow = (\n        <Row justify=\"center\">\n          <Button type=\"primary\"  onClick={this.goEdit}>Edit</Button>\n        </Row>\n      )\n\n      displayDiv = (\n        <div>\n          <Divider />\n          <Tooltip placement=\"top\" title=\"Double click to edit ⚡\" destroyTooltipOnHide={true}>\n            <div\n              className=\"text-corpus\"\n              ref={this._htmlDivRef}\n              dangerouslySetInnerHTML={{__html: textHtml}}\n              onDoubleClick={this.goEdit}\n            />\n          </Tooltip>\n          <Divider />\n        </div>\n      )\n    }\n\n\n    if (entry === null && !this.state.editionMode) {\n      buttonToShow = null\n      displayDiv = (\n        <div\n          style={{\n            height: '50vh',\n            position: 'relative'\n          }}\n        >\n\n            <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              bottom: 0,\n              left: 0,\n              right: 0,\n              margin: 'auto',\n              width: 'fit-content',\n              height: 'fit-content',\n              textAlign: 'center',\n              border: 'dashed 1px #8ac7ff',\n              padding: 20\n            }}\n            >\n              <div \n                style={{\n                  \n                }}\n              >\n                <div>\n                  <QuestionCircleOutlined style={{fontSize: 50, color: '#8ac7ff'}}/>\n                </div>\n                <div style={{margin: 20}}>\n                  Nothing yet, let's write something!\n                </div>\n                <div>\n                  <Button type=\"primary\"  onClick={this.goEdit}>Write</Button>\n                </div>\n              </div>\n            </div>\n\n          \n\n        </div>\n      )\n      \n    }\n\n    return (\n      <div\n        className=\"central-display\"\n      >\n        {header}\n        {displayDiv}\n        {buttonToShow}\n      </div>\n    )\n \n  }\n\n  handleEditorDidMount = (_, editor) => {\n    this.editor = editor;\n    this.setState({\n      isEditorReady: true\n    })\n  }\n}\n\nexport default CentralDisplay","import React from 'react'\nimport './App.css'\nimport { Layout, Row, Col, Drawer, Space } from 'antd'\nimport { MenuOutlined, GithubOutlined } from '@ant-design/icons'\nimport SidePanel from './views/SidePanel'\nimport CentralDisplay from './views/CentralDisplay'\nimport Store from './core/Store'\nimport Tools from './core/Tools'\nimport EntryCollection from './core/EntryCollection'\nconst { Header, Footer, Sider, Content } = Layout\n\n// press cmd + s to download a snapshot\ndocument.addEventListener(\"keydown\", function(e) {\n  if ((window.navigator.platform.match(\"Mac\") ? e.metaKey : e.ctrlKey)  && e.keyCode == 83) {\n    e.preventDefault()\n    EntryCollection.downloadSnapshot()\n  }\n}, false)\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      drawerVisible: false\n    }\n  }\n\n  showDrawer = () => {\n    this.setState({\n      drawerVisible: true,\n    })\n  }\n\n\n  hideDrawer = () => {\n    this.setState({\n      drawerVisible: false,\n    })\n  }\n  \n\n  backOnToday = () => {\n    Store.set('selectedDate', Tools.getIso8601z({onlyDate: true}))\n  }\n\n  render() {\n    let drawerVisible = false\n\n    const logo = (\n      <span\n        className=\"today-logo\"\n      >\n        <span style={{fontWeight: 600, marginRight: '0.25em'}}>today</span> \n        <span style={{fontWeight: 300}}>today</span>\n      </span>\n    )\n\n    let footer = (\n      <span>Made by <a href=\"https://twitter.com/jonathanlurie\">@jonathanlurie</a>. Fork it on <a href=\"https://github.com/jonathanlurie/todaytoday\">GitHub</a>.</span>\n    )\n\n    return (\n      <Layout style={{background: '#fff'}}>\n\n        <Header\n          style={{\n            background: 'white'\n          }}\n        >\n          <Space size=\"middle\">\n            <MenuOutlined onClick={this.showDrawer}/>\n            <div onClick={this.backOnToday}>{logo}</div>\n          </Space>\n        </Header>\n        \n        <Row>\n          <Col xs={2}  sm={2}  md={4}  lg={4} xl={6}>\n            \n          </Col>\n          <Col xs={20} sm={20} md={16} lg={16} xl={12}>\n            <Content>\n              <CentralDisplay/>\n            </Content>\n          </Col>\n          <Col xs={2}  sm={2}  md={4}  lg={4} xl={6}>\n            \n          </Col>\n        </Row>\n        \n        {/* <Footer>Footer</Footer> */}\n        <Drawer\n          title={logo}\n          placement=\"left\"\n          closable={false}\n          onClose={this.hideDrawer}\n          visible={this.state.drawerVisible}\n          width={350}\n          footer={footer}\n        >\n          <SidePanel hideDrawer={this.hideDrawer}/>\n        </Drawer>\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'antd/dist/antd.css'\nimport './index.css'\nimport MyEntryCollection from './core/EntryCollection'\nimport App from './App'\n\n// import * as serviceWorker from './serviceWorker'\n\n\n\n\n(async () => {\n\n  // loads data from ImmortalDB\n  await MyEntryCollection.load()\n\n  ReactDOM.render(\n    // <React.StrictMode>\n      <App />\n    // </React.StrictMode>\n    ,\n    document.getElementById('root')\n  );\n})()\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}